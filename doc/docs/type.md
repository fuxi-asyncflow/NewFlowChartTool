# 类型

## 流程图工具中的类型系统

工具实现了一套类型系统，用于流程图节点代码中的静态类型检查。这套系统相当于 TypeScript 之于 JavaScript, 即给不支持类型检查的脚本语言如 lua, python 等，添加类型检查机制，减少策划在使用流程图接口过程中出现的类型错误。

!!! note
    类型系统仅用于工具编辑与代码生成过程中的代码检查，不会用于 runtime 的运行过程中。

### 类型转换

在实际的项目中，可能存在一些需要类型强制转换的场景。但是工具并不支持类型转换的语法，需要通过函数来实现。

在项目打开时，工具会自动向 `Global` 类型中添加一些用于类型转换的全局函数，函数名与项目中的各个类型名相同。用法如下：
```
$a = Character($obj)
```
相当于 C# 等语言中的 `var a = (Character)obj`, 它并不会带来生成代码时的任何改动。

注意如果 `Global` 中已经存在与类型同名的函数，则工具不会自动添加类型转换函数。

## 内置类型

### 基础类型

| 类型 | 说明 |
| ------ | ------ |
| `Global` | 用于存放全局函数的类型  |
| `Any` | 用于绕过类型检查的类型，应尽量避免使用 |
| `Undefined` | 错误类型，如变量未初始化，或是不支持的类型 |
| `Void` | 空类型，仅用于无返回值的函数中 |
| `Number` | 数值类型 |
| `Bool` | 布尔类型 |
| `String` | 字符串类型，任意类型都可以隐式转换为字符串 |

### 泛型类型

| 类型 | 说明 |
| ------ | ------ |
| `Array` | 数组类型 |
| `Map` | 字典 |
| `Tuple` | 元组，即 Product Type |
| `Union`| Sum Type，`Union<A, B>` 即 `A | B`, 可以接收 A 或 B 的实例 |

## 自定义类型

使用者可以根据游戏项目的情况，向流程图工具中添加一些自定义类型，这些类型通常与游戏代码中的类型对应。
